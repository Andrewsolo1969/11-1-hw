# Домашнее задание к занятию "11.1 «Базы данных, их типы»" - Соловьёв Андрей SYS-18

---

## Задание 1 СУБД

## Кейс

Крупная строительная компания, которая также занимается проектированием и девелопментом, решила создать правильную архитектуру для работы с данными. Ниже представлены задачи, которые необходимо решить для каждой предметной области.

Какие типы СУБД, на ваш взгляд, лучше всего подойдут для решения этих задач и почему?

1.1. Бюджетирование проектов с дальнейшим формированием финансовых аналитических отчётов и прогнозирования рисков. СУБД должна гарантировать целостность и чёткую структуру данных.

Составление финансовых аналитических отчётов и прогнозирование рисков требует точности, надёжности и недопущения потери информации. Вместе с тем данные в таких базах хорошо структурированы.
По этой причине для  подобных задач  подойдут реляционные СУБД (SQL), так как они обеспечивают именно указанные требования - надежность, целостность, простоту запросов к данным и составления отчетов, низкий риск потери информации. 

1.2. Под каждый девелоперский проект создаётся отдельный лендинг, и все данные по лидам стекаются в CRM к маркетологам и менеджерам по продажам. Какой тип СУБД лучше использовать для лендингов и для CRM? СУБД должны быть гибкими и быстрыми.

В таких проектах данных могут быть разных произвольных типов - в том числе схемы, чертежи, различные тексты.

Поэтому выбор - NoSQL - благодаря высокой гибкости и эффективности. У NoSQL нет четких структурированных механизмов. Можно хранить данные любого типа.

1.3. Отдел контроля качества решил создать базу по корпоративным нормам и правилам, обучающему материалу и так далее, сформированную согласно структуре компании. СУБД должна иметь простую и понятную структуру.

Требования, описанные выше как нельзя лучше удовлетворяют именно реляционные СУБД (SQL) - база, сформированная согласно структуре компании, которая должна иметь простую и понятную структуру. Данные в такой базе менятся будут нечасто.
Хотя можно хранить докуметацию, обучающие материалы, различные нормы и правила непосредственно в базе - в зависимости от принятых решений возможно использование и NoSQL СУБД.

1.4. Департамент логистики нуждается в решении задач по быстрому формированию маршрутов доставки материалов по объектам и распределению курьеров по маршрутам с доставкой документов. СУБД должна уметь быстро работать со связями.

NoSQL - благодаря высокой гибкости и эффективности. Оптимальные маршруты доставки могут изменяться быстро в течение дня, и вряд ли возможно как-то однозначно определить и записать оптимальный маршрут в строгую базу SQL. 

## Задание 2 Транзакции

2.1. Пользователь пополняет баланс счёта телефона, распишите пошагово, какие действия должны произойти для того, чтобы транзакция завершилась успешно. Ориентируйтесь на шесть действий.

- Аутентификация клиента и определение номера телефона для пополнения счёта, а также сумму к оплате
- Блокировка необходимой суммы на счёте плательщика 
- Сумма списывется со счёта плательщика
- Сумма зачисляется на счёт компании, которая принимает платежи
- Подтверждение зачисления средств со стороны компании, которая принимает платежи
- Завершение транзакции - транзакция проведена

2.1.* Какие действия должны произойти, если пополнение счёта телефона происходило бы через автоплатёж?

Автоплатёж может настроен по порогу — оплата будет происходить при снижении баланса до заданной суммы, по расписанию — счет телефона будет пополнен в указанный  день на заданную сумму, или в размере выставленного счета — счета будут оплачиваться автоматически в выбранную дату.

Происходят те же действия, за исключением п.1 - в этом случае по расписанию либо при снижении баланса происходит активация процесса автоплатежа - проверка наличия необходимой суммы на счёте плательщика, блокировка заданной суммы на счёте и так далее...


## Задание 3 SQL vs NoSQL

3.1. Напишите пять преимуществ SQL-систем по отношению к NoSQL.

Реляционная база данных (SQL) — база, где данные хранятся в формате таблиц, они строго структурированы и связаны друг с другом. В таблице есть строки и столбцы, каждая строка представляет отдельную запись, а столбец — поле с назначенным ей типом данных. В каждой ячейке информация записана по шаблону.

- Надежность и неизменяемость данных, низкий риск потери информации, целостность и безопасность данных.
- Использование транзакций. Реляционные базы данных, в отличие от нереляционных, соответствуют ACID — это требования к транзакционным системам.
- Реляционные БД идеальны для работы со структурированными данными, структура которых не подвержена частым изменениям.
- Реляционные БД используют для определения и обработки данных SQL — гибкий язык запросов, выбор которого минимизирует ряд рисков и прекрасно подходит для комплексных запросов. В каждой же NoSQL-базе предусмотрен свой алгоритм работы.
- Поддержка и сообщество. Так как история SQL начинается в 1970-х, вокруг этой идеологии работы с данными сложилось обширное сообщество, готовое помочь тем, у кого возникают сложности. Наработан большой опыт применения SQL в самых разных проектах.
- Простота запросов к данным и составления отчетов.


NoSQL в свою очередь  имеет:

- Высокую гибкость
Из презентации - NoSQL не имеет предопределенных схем, что делает её хорошим кандидатом для быстро меняющихся сред разработки.
NoSQL позволяет разработчикам вносить изменения «на лету», не затрагивая приложения.

- Эффективность. Базу, созданную на основе нереляционной системы можно легко оптимизировать под хранение определенных данных или готовых шаблонов. 
Можно хранить данные любого типа прямо в том виде, в котором с ними потом работает приложение и добавлять новые в процессе работы.

- Хорошую масштабируемость. В NoSQL базах данных предусмотрена горизонтальная масштабируемость. 


## Задание 4 Кластеры

Необходимо производить большое количество вычислений при работе с огромным количеством данных, под эту задачу выделено 1000 машин.

На основе какого критерия будете выбирать тип СУБД и какая модель распределённых вычислений здесь справится лучше всего и почему?


Судя по тому, что речь в задании идёт о вычислениях, то вероятнее всего, критериями выбора типа СУБД будут надежность, целостность, чёткая структура данных, низкий риск потери информации. Этим критериям удовлетворяют реляционные база данных (SQL), например MySQL, Oracle RDBMS (Oracle Database), PostgreSQL.
Но MySQL не часто обновляется и не поддерживает горячее резервное копирование. MySQL часто критикуют за недостаточную надежность ( https://highload.today/subd-kakie-byvayut-kak-vybrat/ ).

Поэтому выбор такой - либо Oracle Database, либо PostgreSQL. Обе СУБД подходят для больших организаций, которые обрабатывают огромное количество данных.

Далее выбор определяется следующими факторами (из материалов https://www.performance-lab.ru/press-releases/oracle-vs-postgresql-kakuyu-subd-vybrat ).
- Цена приобретения Oracle высока, так же как и стоимость поддержки. Каждую дополнительную функцию приходится приобретать отдельно. СУБД PostgreSQL является бесплатной, но за ее внедрение, модификацию и поддержку придется все же платить дополнительно.
- Поддержка - стоимость сопровождения Oracle в год составляет почти четверть стоимости лицензии. В случае с PostgreSQL возникшие проблемы будет решать «комьюнити», а не высокооплачиваемая группа профессионалов, хотя можно заключить договор с организацией, которая занимаются профессиональной поддержкой PostgreSQL.
- Производительность - в общем случае СУБД Oracle обеспечивает больше транзакций в секунду (TPS), чем PostgreSQL.
- Масштабируемость - сообщество PostgreSQL бесплатно предоставляет и расширения наподобие PL/Proxy от компании Skype, которое позволяет шардировать информацию по кластеру БД, и отдельные кластерные решения, базирующиеся на PostgreSQL (опять же из материалов вышеприведённой статьи). У Oracle при работе с highload-проектами, скорее всего, придется купить Enterprise edition, что также достаточно дорого.
- Обновляемость - новый релиз Oracle выходит раз в два-три года. PostgreSQL: релиз выходит примерно раз в пять лет. Но, в отличие от Oracle, добавление новых функций и обновление существующих происходит постоянно. 
- Работа с очень большими данными - Enterprise версия Oracle при прочих равных условиях должна быть производительнее PostgreSQL , но для получения конкретных цифр необходимо сравнивать результаты на рабочих запросах в реальных задачах.

В зависимости от выбора - у Oracle - базовые технологии для создания GRID - Грид-вычисления — это форма распределённых вычислений, в которой «виртуальный суперкомпьютер» представлен в виде кластеров, соединённых с помощью сети, слабосвязанных гетерогенных компьютеров, работающих вместе для выполнения огромного количества заданий (https://ru.wikipedia.org/wiki/%D0%93%D1%80%D0%B8%D0%B4). 
СУБД Postgres-XL основанна на технологиях PostgreSQL и предназначена для создания кластерных систем, хорошо подходящих как для обработки транзакций в реальном времени (OLTP), так и для создания крупных баз для анализа больших наборов данных. 













 
